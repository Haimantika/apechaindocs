# Native Yield System : In-Depth

Most rollup solutions at the moment typically require a 7 - x day wait for withdrawals. However, by using the OFT standard, we at ApeChain are able to bypass these delays. By applying the OFT standard both for native yield tokens and as the gas token on our chain, these innovations are web3 firsts that significantly enhance the user experience by reducing withdrawal times and associated fees.

Native yield for specific bridged assets allows assets bridged into the ApeChain ecosystem to automatically generate yield by forwarding them to vaulted sources of yield on the Ethereum mainnet. The initial target assets and yield sources are outlined in the table below:

| Source Token | Yield Source | Destination Token |
| ------------ | ------------ | ----------------- |
| USDC, USDT, DAI | sDAI (DSR) | apeUSD |
| ETH, WETH | wstETH | apeETH |
| ApeCoin | ApeStake | ApeCoin (gas token) |

This innovative concept enables assets to generate yield automatically without manual intervention on Layer 2 and Layer 3 chains. By offering native yield, ApeChain aims to incentivize bridging and enhance the consumer experience by allowing users' wallet balances to rebase at frequent intervals.

## Implementation Strategy

### Decent's Multi-Hop Bridging and Cross-Chain Execution

Decent supports multi-hop bridging and cross-chain execution by preparing call data that instructs the Decent Gateway to fulfill specific actions. These instructions are passed between Gateway endpoints on different chains using arbitrary messaging bridges like LayerZero and rollup frameworks’ canonical bridges.

### Architecture | Yield Routes

To create tokens with native yield on ApeChain, Decent will deploy a new contract called the Yield Route Wrapper. This contract abstracts the process of depositing assets into ERC4626-compliant vaults on Ethereum and creating bridgeable tokens into a single transaction.

## Component Overview

### Deposit Process

1. User selects apeUSD as the destination token, triggering a Yield Route where sDAI on Ethereum is the yield source.

2. User deposits their source token into Decent’s Gateway.

3. Decent swaps the source token into DAI on Ethereum and transfers the DAI to the Yield Route Wrapper.
4. The Wrapper deposits the DAI into the sDAI contract, creating sDAI, and transfers it to the OFT adapter.
5. The Wrapper then mints an OFT version of sDAI on ApeChain, named apeUSD.

### Withdraw Process

1. User selects apeUSD as their source token.
2. User transfers apeUSD to the Decent Gateway contract on ApeChain.
3. The Decent Gateway burns apeUSD on ApeChain and mints apeUSD on Ethereum.
4. The Gateway routes the request to the Yield Route Wrapper, which unrolls the apeUSD into sDAI, swaps it for DAI, and transfers the DAI to the user on Ethereum.




### Rebasing Mechanism

ApeChain's yield-bearing tokens, such as apeUSD and apeETH, support a rebasing mode where users’ balances increase periodically in line with the yield generated by the underlying assets. For example, apeUSD balances will grow in real-time with sDAI yield, reflecting the underlying DAI accrual on Ethereum.

## Scaling & Security

### Aspect | Details

| Aspect      | Details |
| ----------- | ------- |
| Scalability | The on-chain logic for yield routes is generalized, allowing it to scale efficiently with increased volume and new yield-bearing tokens. |
| Security    | Yield-bearing tokens are pegged to underlying rebasing assets, ensuring no risk of undercollateralization (e.g., 1 apeUSD = 1 sDAI). |
| Security Dependencies | Security relies on the underlying smart contract risk of yield protocols and the Decent wrapper. |
| Messaging Security | Messaging between chains is managed securely via LayerZero. |

### Canonical Bridging

ApeChain will utilize two canonical bridge routes:

| Bridge Route   | Purpose |
| -------------- | ------- |
| LayerLeap      | For native yield from Ethereum. |
| Standard Orbit | From Arbitrum, offering a cheaper and faster alternative for bridging, especially for non-yield-bearing ERC20 tokens. |

## Basic and Non-Functional Requirements

### Functional Requirements

| Requirement            | Details |
| ---------------------- | ------- |
| Supported Assets       | Users can deposit APE, USD stablecoins, and ETH on ApeChain to generate native yield. |
| Rebasing Mode          | All yielding assets must support rebasing, ensuring users do not need to manually claim their yield. |
| Cross-Chain Deposits/Withdrawals | Assets can be deposited from and withdrawn to Ethereum mainnet. |

### Non-Functional Requirements

| Requirement                | Details |
| -------------------------- | ------- |
| Decentralized Yield Sources | Yield must be generated from credibly decentralized sources. |
| Decentralized System Control | The yield system's operation and governance must be decentralized. |
| APE Yield via ApeStake     | The current ApeStake mechanism will be used to generate yield for ApeCoin without modifications. |
| Risk Management            | The system should not expose users to risks beyond the inherent smart contract risks of the underlying protocols. |

## Yield Sources and Mechanisms

| Yield Type  | Mechanism | Governance |
| ----------- | --------- | ---------- |
| DAI Yield   | Stablecoins bridged into ApeChain are converted to DAI and deposited into sDAI, accumulating yield based on the MakerDAO savings rate. | Governed by DAI’s governance processes. |
| Lido Yield (ETH) | ETH bridged into ApeChain is deposited into Lido to generate yield, utilizing wstETH to align with rebasing token behavior. | Due to Lido's withdrawal delay, users can either swap Lido ETH to native ETH via a DEX aggregator or withdraw as stETH directly. |
| Ape Yield   | ApeCoin deposited into ApeChain is staked via ApeStake, with yield distributed based on the user’s share of tokens in the pool. | Yield must be claimed via a discrete contract call, managed by the bridge contract. |


# Yield Accounting and Governance

## Setting Rates

### Rate Setting

| Rate Setting       | Details |
| ------------------ | ------- |
| Governance-Driven  | Yield rates for all deposits are set via a governance process and remain fixed until updated. |
| Advantages         | Predictable yields, flexibility to decouple user yields from actual yields, and a unified yield interface. |

### Suggested Rates

| Token | Suggested Yield Rate |
| ----- | -------------------- |
| APE   | 12%                  |
| ETH   | 2.5%                 |
| USD   | 6%                   |

## Use of Remaining Yield

| Usage           | Details |
| --------------- | ------- |
| Burning $APE    | Approximately 50% of the remaining stablecoin and ETH yield will be used to buy and burn ApeCoin from the public market, leveraging Uniswap or a similar DEX on Ethereum. |

## Rebasing Modes

ApeChain will support three configurable rebasing modes for yield-generating tokens:

| Rebasing Mode | Description |
| ------------- | ----------- |
| Void          | No yield is earned; the balance remains unchanged. |
| Automatic     | The balance automatically increases as yield is earned. |
| Claimable     | Yield accumulates separately and can be claimed, but the balance remains unchanged. |

## Conclusion

ApeChain’s native yield system represents a significant advancement in the space, providing a decentralized, automated yield mechanism for bridged assets. By leveraging established protocols, ApeChain ensures sustainable yields and user-friendly operation through careful governance. This spec overview should serve as a guide, enabling developers and users to effectively interact with the native yield system as ApeChain continues to evolve.
